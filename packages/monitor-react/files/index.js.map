{
  "version": 3,
  "sources": ["../../monitor/files/index.js", "../src/component.tsx", "../src/index.ts"],
  "sourcesContent": [
    "var y=\"0.0.3\";function M(e,t){return t.reduce((s,i)=>{return s[i]=e[i],s},{})}function P(){const{userAgent:e}=window.navigator;let t=\"Unknown\";if(/Windows/.test(e))t=\"Windows\";else if(/Mac OS|Macintosh/.test(e))t=\"macOS\";else if(/Linux/.test(e))t=\"Linux\";else if(/Android/.test(e))t=\"Android\";else if(/iOS|iPad|iPhone|iPod/.test(e))t=\"iOS\";return t}function v(){const{userAgent:e}=window.navigator;let t=\"Unknown\",s=\"Unknown\";if(/Firefox\\/([\\d.]+)/.test(e))t=\"Firefox\",s=RegExp.$1;else if(/Chrome\\/([\\d.]+)/.test(e))t=\"Chrome\",s=RegExp.$1;else if(/Safari\\/([\\d.]+)/.test(e))t=\"Safari\",s=RegExp.$1;else if(/MSIE (\\d+\\.\\d+);/.test(e))t=\"Internet Explorer\",s=RegExp.$1;else if(/Edge\\/([\\d.]+)/.test(e))t=\"Edge\",s=RegExp.$1;else if(/Opera\\/([\\d.]+)/.test(e))t=\"Opera\",s=RegExp.$1;return{name:t,version:s}}var I=window.fetch,r={...console},c=window.XMLHttpRequest,x=(e)=>{try{return JSON.stringify(e)}catch(t){return String(e)}};class p{static initialize(e){window.console.log=function(...t){e.logs.capture([\"console\",\"info\",t.join(\" \")]),r.log.call(r,...t)},window.console.warn=function(...t){e.logs.capture([\"console\",\"warn\",t.join(\" \")]),r.warn.call(r,...t)},window.console.error=function(...t){e.logs.capture([\"console\",\"error\",t.join(\" \")]),r.error.call(r,...t)}}}class h{static initialize(e){if(!(\"fetch\"in window))return;async function t(...s){const[i,{method:a=\"GET\",body:o}={}]=s;try{const n=await I.apply(this,s),l=[\"fetch\",\"info\",`${a} ${i} [${n.status}]`];if(o)e.logs.capture([...l,{data:o}]);else e.logs.capture(l);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}window.fetch=t}}class g{static initialize(e){const t=c.prototype.open,s=c.prototype.send;c.prototype.open=function(...i){const[a,o,n]=i;return this.memo={method:null,url:null,async:null},this.memo.method=a,this.memo.url=o,this.memo.async=n,t.apply(this,[...i])},c.prototype.send=function(...i){return this.addEventListener(\"readystatechange\",function(){if(this.readyState===4){const a=[\"xhr\",\"info\",`${this.memo.method} ${this.memo.url} [${this.status}]`];if(i.length>0)e.logs.capture([...a,{data:i[0]}]);else e.logs.capture(a)}}),s.apply(this,[...i])}}}class m{type;level;message;timestamp;extra;constructor(e,t,s,i){this.level=t,this.message=s,this.type=e,this.timestamp=(new Date()).getTime(),this.extra=i||{},this.generateExtra()}generateExtra(){this.timestamp=(new Date()).getTime();const{name:e,version:t}=v(),s=this.extra||{};s.url=window.location.href,s.os=P(),s.browser=e,s.browserVersion=t,s.title=document.title,this.extra=s}destroy(){this.message=null,this.type=null,this.timestamp=null,this.extra=null}}class u{list;max;constructor({max:e=1}){this.max=e,this.list=[]}push(e){this.list=[...(this.list||[]).slice(-1*this.max+1),e]}toNormalize(e){if(!this.list||this.list.length<=0)return null;const t=this.list[this.list.length-1];return{...M(t.extra||{},[\"browser\",\"url\",\"os\",\"title\"]),level:t.level,instance:e,stack:(this.list||[]).reduce((s,i)=>{const{message:a,timestamp:o,type:n}=i;return[...s,(Array.isArray(a)?a:[a]).map((l)=>`[${n}] [${o}] ${typeof l===\"string\"?l.trim():x(l)}`)]},[]).reverse().join(\"\\n\")}}stringify(e){return JSON.stringify(this.toNormalize(e))}destroy(){(this.list||[]).forEach((e)=>e.destroy()),this.list=null}}class d{core;maxStacks=10;stacks=[];constructor(e,t){this.core=e,this.maxStacks=t,this.stacks=[new u({max:this.maxStacks})]}capture(e){if(this.core)if(e instanceof m){const[t]=this.stacks;t.push(e)}else{const[t]=this.stacks;if(e.length===4)t.push(new m(...e));else if(e.length===3)t.push(new m(...[...e,{}]));else throw Error(\"Invalid params\")}}captureAndSync(e){if(this.core){this.capture(e),this.stacks.unshift(new u({max:this.maxStacks}));let t=this.stacks.pop();if(t)return this.core.post({type:\"logs\",body:t.stringify(this.core.baseSettings.instanceId)}).finally(()=>{if(t)t.destroy(),t=void 0})}return Promise.resolve()}}class f{static version=y;connectorId=\"zoomphant-connector\";monitorId=\"zoomphant-monitor\";baseSettings=null;pluginSettings={xhr:!1,fetch:!1,console:!1};connector=null;messageResolvers={};logs;constructor(e){if(new.target!==f)throw new Error(\"A static class cannot be instantiated.\");if(!e)throw new Error(\"Settings is required\");if(this.baseSettings={account:e.account,agent:e.agent,token:e.token,domain:e.domain,instanceId:e.instanceId},this.logs=new d(this,e.maxStacks||10),e.plugins){if(e.plugins.xhr)this.pluginSettings.xhr=!0;if(e.plugins.fetch)this.pluginSettings.fetch=!0;if(e.plugins.console)this.pluginSettings.console=!0}this.initialize()}initialize(){if(this.createConnector(),this.addEventListeners(),this.pluginSettings.fetch)h.initialize(this);if(this.pluginSettings.xhr)g.initialize(this);if(this.pluginSettings.console)p.initialize(this)}createConnector(){this.connector=document.getElementById(this.connectorId)??document.createElement(\"iframe\"),this.connector.id=this.connectorId,this.connector.src=`${this.baseSettings.domain}/connector.html?${new URLSearchParams({...this.baseSettings||{},domain:window.location.origin})}`,this.connector.style.position=\"absolute\",this.connector.style.width=\"0\",this.connector.style.height=\"0\",this.connector.style.border=\"none\",this.connector.style.marginLeft=\"-999px\",document.body.appendChild(this.connector)}addEventListeners(){window.addEventListener(\"message\",this.handleMessage.bind(this))}handleMessage(e){const{source:t,body:s,messageId:i}=e.data;if(t===this.connectorId){const a=this.messageResolvers[i];if(a)a(s),delete this.messageResolvers[i]}}post({type:e,body:t}){if(!this.connector)throw new Error(\"Connector not found\");const s=crypto.randomUUID(),i=new Promise((a)=>{this.messageResolvers[s]=a});return this.connector.contentWindow?.postMessage({source:this.monitorId,type:e,body:t,messageId:s},this.baseSettings.domain),i}destroy(){if(this.connector)document.body.removeChild(this.connector),this.connector=null}}var S=f;var Y=S;export{Y as default};\n\n//# debugId=D4211E5BC694D03264756e2164756e21\n",
  "import React, { useEffect } from 'react';\nimport Monitor from '@zoomphant-utils/monitor';\n\nlet monitor: Monitor;\n\nconst MonitorContext = React.createContext<Monitor | null>(null);\n\nconst MonitorProvider: React.FC<React.PropsWithChildren<{ monitor: Monitor }>> = ({ monitor: _, children }) => {\n  useEffect(() => {\n    monitor = _;\n  }, [])\n  return (\n    <MonitorContext.Provider value={_}>\n      {children}\n    </MonitorContext.Provider>\n  );\n};\n\nconst useMonitor = () => {\n  const monitor = React.useContext(MonitorContext);\n  if (!monitor) {\n    throw new Error('useMonitor must be used within a MonitorProvider');\n  }\n  return monitor;\n};\n\nconst getMonitor = () => monitor;\n\nexport {\n  MonitorProvider,\n  useMonitor,\n  getMonitor,\n}\n",
  "import Monitor from \"@zoomphant-utils/monitor\";\n\nexport * from \"./component\";\nexport default Monitor;\n"
  ],
  "mappings": "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",
  "debugId": "E61D954DA9FA94E864756e2164756e21",
  "names": []
}