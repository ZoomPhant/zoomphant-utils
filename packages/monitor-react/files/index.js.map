{
  "version": 3,
  "sources": ["../../monitor/files/index.js", "../src/component.tsx", "../src/index.ts"],
  "sourcesContent": [
    "var m=\"0.0.1\";function p(t,e){return e.reduce((s,i)=>{return s[i]=t[i],s},{})}function h(){const{userAgent:t}=window.navigator;let e=\"Unknown\";if(/Windows/.test(t))e=\"Windows\";else if(/Mac OS|Macintosh/.test(t))e=\"macOS\";else if(/Linux/.test(t))e=\"Linux\";else if(/Android/.test(t))e=\"Android\";else if(/iOS|iPad|iPhone|iPod/.test(t))e=\"iOS\";return e}function g(){const{userAgent:t}=window.navigator;let e=\"Unknown\",s=\"Unknown\";if(/Firefox\\/([\\d.]+)/.test(t))e=\"Firefox\",s=RegExp.$1;else if(/Chrome\\/([\\d.]+)/.test(t))e=\"Chrome\",s=RegExp.$1;else if(/Safari\\/([\\d.]+)/.test(t))e=\"Safari\",s=RegExp.$1;else if(/MSIE (\\d+\\.\\d+);/.test(t))e=\"Internet Explorer\",s=RegExp.$1;else if(/Edge\\/([\\d.]+)/.test(t))e=\"Edge\",s=RegExp.$1;else if(/Opera\\/([\\d.]+)/.test(t))e=\"Opera\",s=RegExp.$1;return{name:e,version:s}}var u=(t)=>{try{return JSON.stringify(t)}catch(e){return String(t)}};class a{type;level;message;timestamp;extra;constructor(t,e,s){this.level=e,this.message=s,this.type=t,this.timestamp=(new Date()).getTime(),this.extra={},this.generateExtra()}generateExtra(){this.timestamp=(new Date()).getTime();const{name:t,version:e}=g(),s=this.extra||{};s.url=window.location.href,s.os=h(),s.browser=t,s.browserVersion=e,s.title=document.title,this.extra=s}destroy(){this.message=null,this.type=null,this.timestamp=null,this.extra=null}}class r{list;max;constructor({max:t=1}){this.max=t,this.list=[]}push(t){this.list=[...(this.list||[]).slice(-1*this.max+1),t]}toNormalize(t){if(!this.list||this.list.length<=0)return null;const e=this.list[this.list.length-1];return{...p(e.extra||{},[\"browser\",\"url\",\"os\",\"title\"]),level:e.level,instance:t,stack:(this.list||[]).reduce((s,i)=>{const{message:n,timestamp:f,type:y}=i;return[...s,(Array.isArray(n)?n:[n]).map((o)=>`[${y}] [${f}] ${typeof o===\"string\"?o.trim():u(o)}`)]},[]).reverse().join(\"\\n\")}}stringify(t){return JSON.stringify(this.toNormalize(t))}destroy(){(this.list||[]).forEach((t)=>t.destroy()),this.list=null}}class l{core;maxStacks=10;stacks=[];constructor(t,e){this.core=t,this.maxStacks=e,this.stacks=[new r({max:this.maxStacks})]}capture(t){if(this.core)if(t instanceof a){const[e]=this.stacks;e.push(t)}else{const[e]=this.stacks;e.push(new a(...t))}}captureAndSync(t){if(this.core){this.capture(t),this.stacks.unshift(new r({max:this.maxStacks}));let e=this.stacks.pop();if(e)return this.core.post({type:\"logs\",body:e.stringify(this.core.baseSettings.instanceId)}).finally(()=>{if(e)e.destroy(),e=void 0})}return Promise.resolve()}}class c{static version=m;connectorId=\"zoomphant-connector\";monitorId=\"zoomphant-monitor\";baseSettings=null;pluginSettings={xhr:!1,fetch:!1,console:!1};connector=null;messageResolvers={};logs;constructor(t){if(new.target!==c)throw new Error(\"A static class cannot be instantiated.\");if(!t)throw new Error(\"Settings is required\");if(this.baseSettings={account:t.account,agent:t.agent,token:t.token,domain:t.domain,instanceId:t.instanceId},this.logs=new l(this,t.maxStacks||10),t.plugins){if(t.plugins.xhr)this.pluginSettings.xhr=!0;if(t.plugins.fetch)this.pluginSettings.fetch=!0;if(t.plugins.console)this.pluginSettings.console=!0}this.initialize()}initialize(){this.createConnector(),this.addEventListeners()}createConnector(){this.connector=document.getElementById(this.connectorId)??document.createElement(\"iframe\"),this.connector.id=this.connectorId,this.connector.src=`${this.baseSettings.domain}/connector.html?${new URLSearchParams({...this.baseSettings||{},domain:window.location.origin})}`,this.connector.style.position=\"absolute\",this.connector.style.width=\"0\",this.connector.style.height=\"0\",this.connector.style.border=\"none\",this.connector.style.marginLeft=\"-999px\",document.body.appendChild(this.connector)}addEventListeners(){window.addEventListener(\"message\",this.handleMessage.bind(this))}handleMessage(t){const{source:e,body:s,messageId:i}=t.data;if(e===this.connectorId){const n=this.messageResolvers[i];if(n)n(s),delete this.messageResolvers[i]}}post({type:t,body:e}){if(!this.connector)throw new Error(\"Connector not found\");const s=crypto.randomUUID(),i=new Promise((n)=>{this.messageResolvers[s]=n});return this.connector.contentWindow?.postMessage({source:this.monitorId,type:t,body:e,messageId:s},this.baseSettings.domain),i}destroy(){if(this.connector)document.body.removeChild(this.connector),this.connector=null}}var d=c;var D=d;export{D as default};\n\n//# debugId=933BC2D4644304C164756e2164756e21\n",
  "import React, { useEffect } from 'react';\nimport Monitor from '@zoomphant-utils/monitor';\n\nlet monitor: Monitor;\n\nconst MonitorContext = React.createContext<Monitor | null>(null);\n\nconst MonitorProvider: React.FC<React.PropsWithChildren<{ monitor: Monitor }>> = ({ monitor: _, children }) => {\n  useEffect(() => {\n    monitor = _;\n  }, [])\n  return (\n    <MonitorContext.Provider value={_}>\n      {children}\n    </MonitorContext.Provider>\n  );\n};\n\nconst useMonitor = () => {\n  const monitor = React.useContext(MonitorContext);\n  if (!monitor) {\n    throw new Error('useMonitor must be used within a MonitorProvider');\n  }\n  return monitor;\n};\n\nconst getMonitor = () => monitor;\n\nexport {\n  MonitorProvider,\n  useMonitor,\n  getMonitor,\n}\n",
  "import Monitor from \"@zoomphant-utils/monitor\";\n\nexport * from \"./component\";\nexport default Monitor;\n"
  ],
  "mappings": "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",
  "debugId": "405AE5ADFA53CB4664756e2164756e21",
  "names": []
}