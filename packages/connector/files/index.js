var n=new URLSearchParams(window.location.search),i=(s)=>{const t=s.data,o=window.top;if(!o)return;if(s.data.source==="zoomphant-monitor"){const r=t.type==="logs"?"/api/data/web/logs":"/api/data/web/metrics";let e=new window.XMLHttpRequest;e.open("POST",`${r}?${new URLSearchParams({agentId:n.get("agent"),token:n.get("token")}).toString()}`,!0),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-account-id",n.get("account")),e.onload=()=>{o.postMessage({messageId:t.messageId,source:"zoomphant-connector",type:t.type,body:{}},n.get("domain")),e=null},e.onerror=()=>{o.postMessage({messageId:t.messageId,source:"zoomphant-connector",body:{error:e?.responseText},type:t.type},n.get("domain")),e=null},e.send(s.data.body)}},d=()=>{window.addEventListener("message",i)};function a(){window.document.addEventListener("DOMContentLoaded",d)}a();
